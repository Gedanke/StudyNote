# 模块八练习题

本节会把 [模块八: 虚拟化和其他](../../notes/module_8) 中涉及的课后练习题，逐一讲解，并给出每个课时练习题的解题思路和答案。

---
---

## 37 | 虚拟化技术介绍: VMware 和 Docker 的区别

自己尝试用 Docker 执行一个自己方向的 Web 程序: 比如 Spring/Django/Express 等？

关于如何安装 Docker，可以参考这篇 [文档](https://docs.docker.com/get-docker/) 。然后这里还有一个不错的 SpringBoot+MySQL+Redis
例子，可以参考这篇 [内容](https://github.com/tomoyane/springboot-bestpractice) 。

其他方向可以参考上面例子中的 Compose.yml 去定义自己的环境。一般开发环境喜欢把所有工具链用 Compose 放到一起，上线的环境数据库一般不会用 Docker 容器。Docker-Compose
是一个专门用来定义多容器任务的工具，你可以在 [这里](https://docs.docker.com/compose/install/) 得到。

国内镜像可以用 Aliyun 的，具体你可以参考这篇 [文档](https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors) (注: 需要一个账号并且登录)。

---

## 38 | 容器编排技术: 如何利用 K8s 和 Docker Swarm 管理微服务

为什么会有多个容器共用一个 Pod 的需求？

Pod 内部的容器共用一个网络空间，可以通过 localhost 进行通信。另外多个容器，还可以共享一个存储空间。

比如一个 Web 服务容器，可以将日志、监控数据不断写入共享的磁盘空间，然后由日志服务、监控服务处理将日志上传。

再比如说一些跨语言的场景，比如一个 Java 服务接收到了视频文件传给一 个 OpenCV 容器进行处理。

以上这种设计模式，称为边车模式(Sidecar)，边车模式将数个容器放入一个分组内(例如 K8s 的 Pod)，让它们可以分配到相同的节点上。这样它们彼此间可以共用磁盘、网络等。

在边车模式中，有一类容器，被称为Ambassador Container，翻译过来是使节容器。对于一个主容器(Main Container)上的服务，可以通过 Ambassador Container 来连接外部服务。如下图所示:

![](../../images/module_8/e_1.png)

在开发的时候经常会配置不同的环境。如果每个 Web 应用都要实现一套环境探测程序，比如判断是开发、测试还是线上环境，从而连接不同的 MySQL、Redis
等服务，那么每个项目都需要引入一个公用的库，或者实现一套逻辑。这样可以使用一个边车容器，专门提供数据库连接的服务。让连接服务可以自动探测环境，并且从远程读取全局配置，这样每个项目的开发者不需要再关心数据库有多少套环境、如何配置了。

---

## 总结

[39 | Linux 架构优秀在哪里](lecture_39.md) 和 [40 | 商业操作系统: 电商操作系统是不是一个噱头](lecture_40.md) 因为这两讲内容人文色彩较重，没有给你设置课后习题。

到这里，[重学操作系统](../../README.md) 专栏的全部知识都已经讲解结束了。在这 40 讲中，我试图用通俗易懂的语言帮助你建立整个《操作系统》的知识体系，并且最大程度地帮助你将这些基础知识发散到实战场景中去。

最后的结束篇将讨论 [程序员的发展——信仰、选择和博弈](../end.md)

---
---

